var gulp=require("gulp");var cssmin=require("gulp-cssmin");var rename=require("gulp-rename");var concat=require("gulp-concat");var jsmin=require("gulp-jsmin");var plumber=require("gulp-plumber");var sass=require("gulp-sass");var cmq=require("gulp-merge-media-queries");var autoprefixer=require("gulp-autoprefixer");var cleanCss=require("gulp-clean-css");var runSequence=require("run-sequence");var replace=require("gulp-replace");gulp.task("text-domain",function(){gulp.src(["./inc/font-awesome/*"]).pipe(replace("vk_font_awesome_version_textdomain","lightning")).pipe(gulp.dest("./inc/font-awesome/"));gulp.src(["./inc/vk-mobile-nav/*"]).pipe(replace("vk_mobile_nav_textdomain","lightning")).pipe(gulp.dest("./inc/vk-mobile-nav/"))});gulp.task("sass",function(){gulp.src(["design-skin/origin/_scss/**/*.scss"]).pipe(plumber({handleError:function(err){console.log(err);this.emit("end")}})).pipe(plumber()).pipe(sass()).pipe(cmq({log:true})).pipe(autoprefixer()).pipe(cleanCss()).pipe(gulp.dest("./design-skin/origin/css"));gulp.src(["./assets/_scss/**/*.scss"]).pipe(plumber({handleError:function(err){console.log(err);this.emit("end")}})).pipe(plumber()).pipe(sass()).pipe(cmq({log:true})).pipe(autoprefixer()).pipe(cleanCss()).pipe(gulp.dest("./assets/css/"))});gulp.task("copy",function(){gulp.src("./library/bootstrap/css/bootstrap.min.css").pipe(rename({prefix:"_",extname:".scss"})).pipe(gulp.dest("./design-skin/origin/_scss/"));gulp.src("./library/bootstrap/fonts/**").pipe(gulp.dest("./design-skin/origin/fonts/"))});gulp.task("js_build",function(){return gulp.src(["./library/bootstrap/js/bootstrap.min.js","./assets/js/_master.js","./assets/js/_header_fixed.js","./assets/js/_sidebar-fixed.js","./assets/js/_vk-prlx.min.js","./inc/vk-mobile-nav/js/vk-mobile-nav.min.js"]).pipe(concat("lightning.js")).pipe(jsmin()).pipe(rename({suffix:".min"})).pipe(gulp.dest("./assets/js/"))});gulp.task("watch",function(){gulp.watch("./assets/js/**",["js_build"]);gulp.watch("./inc/vk-mobile-nav/js/**",["js_build"]);gulp.watch("./design-skin/origin/_scss/**/*.scss",["sass"]);gulp.watch("./assets/_scss/**",["sass"])});gulp.task("default",["copy","js_build","text-domain","watch"]);gulp.task("compile",["copy","js_build","text-domain"]);gulp.task("copy_dist",function(){return gulp.src(["./**/*.php","./**/*.txt","./**/*.css","./**/*.png","./design-skin/**","./assets/**","./inc/**","./languages/**","./library/**","./template-parts/**","!./tests/**","!./dist/**","!./node_modules/**/*.*"],{base:"./"}).pipe(gulp.dest("dist/lightning"))});gulp.task("dist",function(cb){return runSequence("text-domain","copy_dist",cb)});